---

title: CSS 外边距合并问题

layout: post

---

CSS 外边距的合并一直很容易令人混淆，[W3School](http://www.w3school.com.cn/css/css_margin_collapsing.asp) 上专门有一节详细讲述了 CSS 的外边距合并问题，尽管它解释起来是相当简单的一个概念。我仍然想不明白这种不必要且不易用的设计，可能是对辛苦劳作的程序员的一种折磨吧。

>外边距合并指的是，当两个垂直外边距相遇时，它们将形成一个外边距。
合并后的外边距的高度等于两个发生合并的外边距的高度中的较大者。

有趣的是，水平外边距并不会有合并的问题，另外下边的注释详细告诉我们：只有普通文档流中块框的垂直外边距才会发生外边距合并。行内框、浮动框或绝对定位之间的外边距不会合并。

下面几点总结了 margin 外边距常遇到的一些问题：

* 水平 margin 不会合并

* 两个上下渲染相邻（不一定是兄弟节点）的块状元素在正常页面流情况下会发生 margin 合并

* 浮动元素不会和任何元素（包括子孙节点）发生 margin 合并

* overflow = visible 的元素不和任何元素发生 margin 合并

* 绝对定位的元素不和任何元素发生 margin 合并

* inline-block 的元素不和任何元素发生 margin 合并

* 设置 clear 属性的元素不和任何元素发生 margin 合并

* 根元素不和任何元素发生 margin 合并

* 父节点和第一个子节点发生 margin-top 合并

* 如果最后一个子节点没有 border 以及 padding ，则和其父节点发生 margin-bottom 合并